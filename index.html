<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>üèì TOP TURNIER ANMELDUNG</title>
<link rel="icon" href="logo.png">
<style>
:root{--accent:#d21d1d;--accent-dark:#b31515}
*{box-sizing:border-box;font-family:Inter, Arial, sans-serif}
body{margin:0;min-height:100vh;background:url('tt_bg_v31.jpg') center/cover no-repeat fixed;display:flex;align-items:flex-start;justify-content:center}
.card{width:100%;max-width:760px;background:rgba(255,255,255,0.94);margin:clamp(28px, 6vh, 64px) 16px 54px;padding:26px;border-radius:18px;box-shadow:0 12px 44px rgba(0,0,0,.35);border:4px solid rgba(255,255,255,.06)}
.header{display:flex;align-items:center;gap:16px}
.logo{width:96px;height:96px;border-radius:12px;overflow:hidden;flex:0 0 96px}
.title-wrap{flex:1;text-align:center}
.h1{margin:0;font-weight:900;font-size:clamp(24px,3.4vw,32px);opacity:0;transform:translateY(-26px);animation:flyDown 900ms cubic-bezier(.22,.9,.3,1) 120ms forwards;text-shadow:0 0 0 rgba(210,29,29,0)}
.year{margin:8px 0 0 0;font-size:clamp(18px,2.8vw,26px);font-weight:800;color:#d21d1d;opacity:0;transform:translateY(-18px);animation:flyDown 800ms cubic-bezier(.22,.9,.3,1) 260ms forwards}
@keyframes flyDown{to{opacity:1;transform:none;text-shadow:0 0 16px rgba(210,29,29,.25);}}
.countdown{margin-top:16px;padding:12px;border-radius:12px;background:#fff6d8;border:2px solid var(--accent);color:#a31212;font-weight:800;text-align:center;line-height:1.3}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
.input{width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;font-size:16px}
.input-full{grid-column:1/-1}
.btn{margin-top:16px;padding:14px 16px;border-radius:12px;border:none;background:var(--accent);color:#fff;font-weight:800;font-size:16px;cursor:pointer}
.panel{margin-top:18px;display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap}
.cta-link{display:inline-block;padding:10px 14px;border-radius:10px;background:#f3f3f3;text-decoration:none;color:#111;border:1px solid #e7e7e7;font-weight:800}
.small{color:#666;margin-top:10px;text-align:center;font-size:14px}
/* ---- Mobile tweaks ---- */
@media (max-width: 720px){
  .form-grid{grid-template-columns:1fr}
  .card{max-width:96vw;padding:20px;margin:20px 10px 28px}
  .logo{width:72px;height:72px}
  .btn{width:100%;font-size:18px}
}
@media (max-width: 520px){
  .h1{font-size:22px}
  .year{font-size:20px;margin-top:6px}
  .countdown{font-size:15px;padding:10px}
}
</style>
</head>
<body>
<audio id="bgmusic" src="music.mp3" loop></audio>

<div class="card" role="main" aria-labelledby="main-title">
  <div class="header">
    <img src="logo.png" alt="Logo" class="logo"/>
    <div class="title-wrap">
      <h1 id="main-title" class="h1">üèì TOP TURNIER ANMELDUNG</h1>
      <h2 class="year">2026</h2>
    </div>
  </div>

  <div id="countdown" class="countdown">Lade Countdown‚Ä¶</div>

  <form id="signupForm" class="form" autocomplete="off" novalidate>
    <div class="form-grid">
      <input class="input" name="vorname" placeholder="Vorname" required>
      <input class="input" name="nachname" placeholder="Nachname" required>
      <input class="input" name="geburtsdatum" type="date" placeholder="Geburtsdatum" required>
      <input class="input" name="ttr" type="number" placeholder="TTR Punkte" required>
      <input class="input input-full" name="verein" placeholder="Verein">
    </div>
    <button class="btn" type="submit">‚úÖ Jetzt anmelden</button>
  </form>

  <div class="panel">
    <a class="cta-link" href="ranking.html" target="_blank" rel="noopener">üèÜ Live‚ÄëRanking √∂ffnen</a>
    <a class="cta-link" href="/admin" rel="noopener">üîí Admin</a>
  </div>

  <div class="small">Musik startet nach dem ersten Klick (leise, loop).</div>
</div>

<script>
// Countdown bis 03.01.2026 12:00
const turnierDate = new Date("2026-01-03T12:00:00");

function twoLineMode(){ return window.matchMedia('(max-width: 520px)').matches; }

function formatCountdown(diffMs){
  if(diffMs <= 0) return { html: 'Das Turnier hat begonnen!', text: 'Das Turnier hat begonnen!' };
  const d = Math.floor(diffMs/86400000);
  const h = Math.floor(diffMs/3600000%24);
  const m = Math.floor(diffMs/60000%60);
  const s = Math.floor(diffMs/1000%60);
  const line1 = `${d} Tage ${h} Stunden`;
  const line2 = `${m} Minuten ${s} Sekunden`;
  return twoLineMode()
    ? { html: `Turnier startet in:<br>${line1}<br>${line2}`, text: null }
    : { html: null, text: `Turnier startet in: ${d} Tage ${h} Stunden ${m} Minuten ${s} Sekunden` };
}

function updateCountdown(){
  const now = new Date();
  const diff = turnierDate - now;
  const el = document.getElementById('countdown');
  const out = formatCountdown(diff);
  if(out.html){ el.innerHTML = out.html; } else { el.textContent = out.text; }
}
setInterval(updateCountdown, 1000);
updateCountdown();
window.addEventListener('resize', updateCountdown);

// Musik leise nach erstem Klick starten
const bgmusic = document.getElementById('bgmusic');
bgmusic.volume = 0.15;
document.addEventListener('click', ()=>{ bgmusic.play().catch(()=>{}); }, {once:true});

// Formular absenden
document.getElementById('signupForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.target));
  const res = await fetch('/anmelden', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(data)});
  const txt = await res.text();
  alert(txt);
  e.target.reset();
});
</script>
</body>
</html>
